general {
    lock_cmd = pidof hyprlock || hyprlock                             # avoid starting multiple hyprlock instances.
    before_sleep_cmd = loginctl lock-session                          # lock before suspend.
    after_sleep_cmd = hyprctl dispatch dpms on                        # to avoid having to press a key twice to turn on the display.
}

listener {
    timeout = 300                                                     # 5min.
    # set monitor backlight to minimum, avoid 0 on OLED monitor.
    on-timeout = bash -c 'brightnessctl -s set 10 && ddcutil getvcp 10 -t | awk "{print \$4}" > /tmp/ex-brightness && ddcutil setvcp 10 1'
    # monitor backlight restore.
    on-resume = bash -c 'brightnessctl -r; val=$(cat /tmp/ex-brightness); [[ "$val" =~ ^[0-9]+$ ]] && (( val>=1 && val<=100 )) && ddcutil setvcp 10 "$val" || echo "Failed"'
}

# turn off keyboard backlight, comment out this section if you dont have a keyboard backlight.
listener { 
    timeout = 300                                                     # 5min.
    on-timeout = brightnessctl -sd rgb:kbd_backlight set 0            # turn off keyboard backlight.
    on-resume = brightnessctl -rd rgb:kbd_backlight                   # turn on keyboard backlight.
}

listener {
    timeout = 600                                                     # 10min
    on-timeout = loginctl lock-session                                # lock screen when timeout has passed
}

listener {
    timeout = 660                                                     # 11min
    on-timeout = systemctl suspend-then-hibernate                     # screen off when timeout has passed
}
